{
  "project": {
    "name": "TravelPro Builder",
    "version": "1.0.0",
    "description": "Professional travel package management SaaS for travel agencies",
    "type": "saas",
    "languages": ["he", "en"],
    "default_language": "he",
    "default_direction": "rtl"
  },

  "stack": {
    "frontend": {
      "framework": "Next.js 14",
      "language": "TypeScript",
      "styling": "Tailwind CSS",
      "state_management": "Zustand",
      "data_fetching": "@tanstack/react-query",
      "drag_and_drop": "@dnd-kit/core + @dnd-kit/sortable",
      "icons": "lucide-react",
      "pdf": "react-pdf + @react-pdf/renderer",
      "i18n": "next-intl",
      "forms": "react-hook-form + zod",
      "notifications": "sonner",
      "date": "date-fns"
    },
    "backend": {
      "framework": "Next.js API Routes",
      "database": "Supabase (PostgreSQL)",
      "auth": "Supabase Auth",
      "storage": "Supabase Storage",
      "email": "Resend",
      "hosting": "Vercel"
    },
    "dev_tools": {
      "package_manager": "npm",
      "linting": "ESLint",
      "formatting": "Prettier",
      "git": true
    }
  },

  "environment_variables": {
    "NEXT_PUBLIC_SUPABASE_URL": "https://xxxxx.supabase.co",
    "NEXT_PUBLIC_SUPABASE_ANON_KEY": "eyJ...",
    "SUPABASE_SERVICE_ROLE_KEY": "eyJ...",
    "RESEND_API_KEY": "re_...",
    "NEXT_PUBLIC_APP_URL": "https://travelpro.app",
    "NEXT_PUBLIC_DEFAULT_LOCALE": "he"
  },

  "database": {
    "provider": "supabase",
    "tables": {
      "agencies": {
        "description": "Travel agencies (multi-tenant root)",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "name": { "type": "text", "required": true },
          "slug": { "type": "text", "unique": true, "required": true },
          "logo_url": { "type": "text", "nullable": true },
          "logo_dark_url": { "type": "text", "nullable": true },
          "primary_color": { "type": "text", "default": "#2563eb" },
          "secondary_color": { "type": "text", "default": "#059669" },
          "contact_email": { "type": "text", "nullable": true },
          "contact_phone": { "type": "text", "nullable": true },
          "contact_whatsapp": { "type": "text", "nullable": true },
          "address": { "type": "text", "nullable": true },
          "website": { "type": "text", "nullable": true },
          "default_currency": { "type": "text", "default": "USD" },
          "default_language": { "type": "text", "default": "he" },
          "terms_text": { "type": "text", "nullable": true },
          "email_signature": { "type": "text", "nullable": true },
          "pdf_footer_text": { "type": "text", "nullable": true },
          "subscription_plan": { "type": "text", "default": "basic", "enum": ["basic", "pro", "enterprise"] },
          "subscription_status": { "type": "text", "default": "active", "enum": ["active", "trial", "expired", "cancelled"] },
          "trial_ends_at": { "type": "timestamptz", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["slug"],
        "rls": {
          "select": "agency_id = auth.jwt() -> agency_id",
          "insert": "authenticated",
          "update": "agency_id = auth.jwt() -> agency_id AND role IN ('admin', 'owner')",
          "delete": "agency_id = auth.jwt() -> agency_id AND role = 'owner'"
        }
      },

      "users": {
        "description": "Users linked to agencies with roles",
        "columns": {
          "id": { "type": "uuid", "primary": true, "references": "auth.users(id)" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "full_name": { "type": "text", "required": true },
          "email": { "type": "text", "required": true },
          "phone": { "type": "text", "nullable": true },
          "role": { "type": "text", "default": "agent", "enum": ["owner", "admin", "agent", "viewer"] },
          "avatar_url": { "type": "text", "nullable": true },
          "is_active": { "type": "boolean", "default": true },
          "last_login_at": { "type": "timestamptz", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "email"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "update": "id = auth.uid() OR (agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner'))"
        }
      },

      "countries": {
        "description": "Countries available for packages",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "name": { "type": "text", "required": true },
          "name_en": { "type": "text", "nullable": true },
          "code": { "type": "text", "required": true, "comment": "ISO 3166-1 alpha-2" },
          "currency": { "type": "text", "required": true },
          "currency_symbol": { "type": "text", "nullable": true },
          "language": { "type": "text", "nullable": true },
          "timezone": { "type": "text", "nullable": true },
          "visa_info": { "type": "text", "nullable": true },
          "best_season": { "type": "text", "nullable": true },
          "description": { "type": "text", "nullable": true },
          "image_url": { "type": "text", "nullable": true },
          "is_active": { "type": "boolean", "default": true },
          "sort_order": { "type": "integer", "default": 0 },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "code"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner', 'agent')",
          "update": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner', 'agent')",
          "delete": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner')"
        }
      },

      "destinations": {
        "description": "Destinations within countries",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "country_id": { "type": "uuid", "required": true, "references": "countries(id)" },
          "name": { "type": "text", "required": true },
          "name_en": { "type": "text", "nullable": true },
          "region": { "type": "text", "nullable": true },
          "airport_code": { "type": "text", "nullable": true },
          "latitude": { "type": "decimal", "nullable": true },
          "longitude": { "type": "decimal", "nullable": true },
          "highlights": { "type": "jsonb", "default": "[]", "comment": "array of strings" },
          "description": { "type": "text", "nullable": true },
          "image_url": { "type": "text", "nullable": true },
          "gallery": { "type": "jsonb", "default": "[]", "comment": "array of image URLs" },
          "is_active": { "type": "boolean", "default": true },
          "sort_order": { "type": "integer", "default": 0 },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "country_id"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner')"
        }
      },

      "clients": {
        "description": "Agency clients/customers",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "name": { "type": "text", "required": true },
          "email": { "type": "text", "nullable": true },
          "phone": { "type": "text", "nullable": true },
          "whatsapp": { "type": "text", "nullable": true },
          "address": { "type": "text", "nullable": true },
          "notes": { "type": "text", "nullable": true },
          "preferences": { "type": "jsonb", "default": "{}", "comment": "travel preferences" },
          "tags": { "type": "jsonb", "default": "[]" },
          "is_active": { "type": "boolean", "default": true },
          "created_by": { "type": "uuid", "references": "users(id)", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "email", "phone"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner')"
        }
      },

      "packages": {
        "description": "Travel packages - the main entity",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "title": { "type": "text", "required": true },
          "description": { "type": "text", "nullable": true },
          "country_id": { "type": "uuid", "references": "countries(id)", "nullable": true },
          "client_id": { "type": "uuid", "references": "clients(id)", "nullable": true },
          "status": { "type": "text", "default": "draft", "enum": ["draft", "sent", "confirmed", "cancelled"] },
          "start_date": { "type": "date", "nullable": true },
          "end_date": { "type": "date", "nullable": true },
          "currency": { "type": "text", "default": "USD" },
          "total_price": { "type": "decimal", "default": 0, "comment": "auto-calculated from items" },
          "adults": { "type": "integer", "default": 2 },
          "children": { "type": "integer", "default": 0 },
          "infants": { "type": "integer", "default": 0 },
          "client_name": { "type": "text", "nullable": true, "comment": "quick client name without client record" },
          "client_email": { "type": "text", "nullable": true },
          "client_phone": { "type": "text", "nullable": true },
          "client_notes": { "type": "text", "nullable": true },
          "internal_notes": { "type": "text", "nullable": true, "comment": "agent notes, not visible to client" },
          "public_token": { "type": "text", "unique": true, "nullable": true, "comment": "for public viewing link" },
          "public_expires_at": { "type": "timestamptz", "nullable": true },
          "language": { "type": "text", "default": "he", "comment": "output language for client" },
          "sent_at": { "type": "timestamptz", "nullable": true },
          "confirmed_at": { "type": "timestamptz", "nullable": true },
          "created_by": { "type": "uuid", "references": "users(id)", "nullable": true },
          "duplicated_from": { "type": "uuid", "references": "packages(id)", "nullable": true },
          "template_id": { "type": "uuid", "references": "templates(id)", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "status", "country_id", "client_id", "public_token", "created_by"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner')"
        }
      },

      "package_days": {
        "description": "Days within a package",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "package_id": { "type": "uuid", "required": true, "references": "packages(id)", "on_delete": "CASCADE" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "day_number": { "type": "integer", "required": true },
          "date": { "type": "date", "nullable": true },
          "title": { "type": "text", "required": true },
          "destination_id": { "type": "uuid", "references": "destinations(id)", "nullable": true },
          "notes": { "type": "text", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["package_id", "agency_id"],
        "constraints": {
          "unique": ["package_id", "day_number"]
        },
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id()"
        }
      },

      "package_items": {
        "description": "Items within a day",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "day_id": { "type": "uuid", "required": true, "references": "package_days(id)", "on_delete": "CASCADE" },
          "package_id": { "type": "uuid", "required": true, "references": "packages(id)", "on_delete": "CASCADE" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "type": { "type": "text", "required": true, "enum": ["flight", "accommodation", "transfer", "activity", "meal", "transition", "free_time", "custom"] },
          "sort_order": { "type": "integer", "default": 0 },
          "title": { "type": "text", "required": true },
          "subtitle": { "type": "text", "nullable": true },
          "description": { "type": "text", "nullable": true },
          "time_start": { "type": "text", "nullable": true, "comment": "HH:MM format" },
          "time_end": { "type": "text", "nullable": true },
          "duration": { "type": "text", "nullable": true },
          "price": { "type": "decimal", "default": 0 },
          "price_per": { "type": "text", "default": "total", "enum": ["total", "person", "night", "unit"] },
          "notes": { "type": "text", "nullable": true },
          "data": { "type": "jsonb", "default": "{}", "comment": "type-specific extra fields" },
          "image_url": { "type": "text", "nullable": true },
          "is_included": { "type": "boolean", "default": true, "comment": "included in price or extra" },
          "is_optional": { "type": "boolean", "default": false },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["day_id", "package_id", "agency_id", "type"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id()"
        }
      },

      "templates": {
        "description": "Reusable package templates",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "name": { "type": "text", "required": true },
          "description": { "type": "text", "nullable": true },
          "country_id": { "type": "uuid", "references": "countries(id)", "nullable": true },
          "duration_days": { "type": "integer", "nullable": true },
          "base_price": { "type": "decimal", "default": 0 },
          "currency": { "type": "text", "default": "USD" },
          "template_data": { "type": "jsonb", "required": true, "comment": "full days + items structure" },
          "image_url": { "type": "text", "nullable": true },
          "is_active": { "type": "boolean", "default": true },
          "usage_count": { "type": "integer", "default": 0 },
          "created_by": { "type": "uuid", "references": "users(id)", "nullable": true },
          "created_at": { "type": "timestamptz", "default": "now()" },
          "updated_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "country_id"],
        "rls": {
          "select": "agency_id = current_user_agency_id()",
          "insert": "agency_id = current_user_agency_id()",
          "update": "agency_id = current_user_agency_id()",
          "delete": "agency_id = current_user_agency_id() AND current_user_role() IN ('admin', 'owner')"
        }
      },

      "activity_log": {
        "description": "Audit log for tracking actions",
        "columns": {
          "id": { "type": "uuid", "primary": true, "default": "gen_random_uuid()" },
          "agency_id": { "type": "uuid", "required": true, "references": "agencies(id)" },
          "user_id": { "type": "uuid", "references": "users(id)", "nullable": true },
          "action": { "type": "text", "required": true, "enum": ["created", "updated", "deleted", "sent", "confirmed", "cancelled", "duplicated", "viewed", "downloaded"] },
          "entity_type": { "type": "text", "required": true, "enum": ["package", "client", "country", "destination", "template"] },
          "entity_id": { "type": "uuid", "required": true },
          "metadata": { "type": "jsonb", "default": "{}" },
          "created_at": { "type": "timestamptz", "default": "now()" }
        },
        "indexes": ["agency_id", "entity_type", "entity_id", "created_at"]
      }
    },

    "functions": {
      "current_user_agency_id": {
        "description": "Get the agency_id of the current authenticated user",
        "returns": "uuid",
        "body": "SELECT agency_id FROM public.users WHERE id = auth.uid()"
      },
      "current_user_role": {
        "description": "Get the role of the current authenticated user",
        "returns": "text",
        "body": "SELECT role FROM public.users WHERE id = auth.uid()"
      },
      "calculate_package_total": {
        "description": "Recalculate and update package total price",
        "params": { "p_package_id": "uuid" },
        "returns": "decimal",
        "trigger_on": "package_items INSERT/UPDATE/DELETE"
      },
      "generate_public_token": {
        "description": "Generate unique public viewing token",
        "returns": "text",
        "body": "encode(gen_random_bytes(32), 'hex')"
      }
    },

    "triggers": {
      "update_package_total_on_item_change": {
        "table": "package_items",
        "events": ["INSERT", "UPDATE", "DELETE"],
        "function": "calculate_package_total"
      },
      "set_updated_at": {
        "tables": ["agencies", "users", "countries", "destinations", "clients", "packages", "package_days", "package_items", "templates"],
        "events": ["UPDATE"],
        "body": "NEW.updated_at = now()"
      }
    },

    "storage_buckets": {
      "logos": { "public": true, "max_size": "2MB", "allowed_types": ["image/png", "image/jpeg", "image/svg+xml"] },
      "package-images": { "public": true, "max_size": "5MB", "allowed_types": ["image/png", "image/jpeg", "image/webp"] },
      "destination-images": { "public": true, "max_size": "5MB", "allowed_types": ["image/png", "image/jpeg", "image/webp"] },
      "generated-pdfs": { "public": false, "max_size": "20MB", "allowed_types": ["application/pdf"] }
    }
  },

  "item_types": {
    "flight": {
      "icon": "âœˆï¸",
      "label_he": "×˜×™×¡×”",
      "label_en": "Flight",
      "color": "#3B82F6",
      "bg_class": "bg-blue-100 border-blue-300",
      "fields": {
        "airline": { "type": "text", "label_he": "×—×‘×¨×ª ×ª×¢×•×¤×”", "label_en": "Airline", "required": true },
        "flight_number": { "type": "text", "label_he": "××¡×¤×¨ ×˜×™×¡×”", "label_en": "Flight Number" },
        "from": { "type": "text", "label_he": "××•×¦×", "label_en": "From", "required": true },
        "to": { "type": "text", "label_he": "×™×¢×“", "label_en": "To", "required": true },
        "departure_time": { "type": "time", "label_he": "×”××¨××”", "label_en": "Departure" },
        "arrival_time": { "type": "time", "label_he": "× ×—×™×ª×”", "label_en": "Arrival" },
        "class": { "type": "select", "label_he": "××—×œ×§×”", "label_en": "Class", "options": ["economy", "premium_economy", "business", "first"] },
        "baggage": { "type": "text", "label_he": "××–×•×•×“×•×ª", "label_en": "Baggage" },
        "terminal": { "type": "text", "label_he": "×˜×¨××™× ×œ", "label_en": "Terminal" }
      }
    },
    "accommodation": {
      "icon": "ğŸ¨",
      "label_he": "×œ×™× ×”",
      "label_en": "Accommodation",
      "color": "#8B5CF6",
      "bg_class": "bg-purple-100 border-purple-300",
      "fields": {
        "hotel_name": { "type": "text", "label_he": "×©× ×”××œ×•×Ÿ", "label_en": "Hotel Name", "required": true },
        "room_type": { "type": "text", "label_he": "×¡×•×’ ×—×“×¨", "label_en": "Room Type" },
        "nights": { "type": "number", "label_he": "×œ×™×œ×•×ª", "label_en": "Nights", "required": true },
        "check_in": { "type": "time", "label_he": "×¦'×§-××™×Ÿ", "label_en": "Check-in" },
        "check_out": { "type": "time", "label_he": "×¦'×§-×××•×˜", "label_en": "Check-out" },
        "meals": { "type": "select", "label_he": "××¨×•×—×•×ª", "label_en": "Meals", "options": ["RO", "BB", "HB", "FB", "AI"] },
        "stars": { "type": "select", "label_he": "×›×•×›×‘×™×", "label_en": "Stars", "options": [1, 2, 3, 4, 5] },
        "address": { "type": "text", "label_he": "×›×ª×•×‘×ª", "label_en": "Address" },
        "website": { "type": "url", "label_he": "××ª×¨", "label_en": "Website" },
        "confirmation_number": { "type": "text", "label_he": "××¡×¤×¨ ××™×©×•×¨", "label_en": "Confirmation #" }
      }
    },
    "transfer": {
      "icon": "ğŸš—",
      "label_he": "×”×¢×‘×¨×”",
      "label_en": "Transfer",
      "color": "#F59E0B",
      "bg_class": "bg-amber-100 border-amber-300",
      "fields": {
        "vehicle_type": { "type": "select", "label_he": "×¡×•×’ ×¨×›×‘", "label_en": "Vehicle", "options": ["private_car", "minibus", "bus", "speedboat", "taxi", "train"], "required": true },
        "from": { "type": "text", "label_he": "××•×¦×", "label_en": "From", "required": true },
        "to": { "type": "text", "label_he": "×™×¢×“", "label_en": "To", "required": true },
        "duration": { "type": "text", "label_he": "××©×š × ×¡×™×¢×”", "label_en": "Duration" },
        "pickup_time": { "type": "time", "label_he": "×©×¢×ª ××™×¡×•×£", "label_en": "Pickup Time" },
        "pickup_location": { "type": "text", "label_he": "× ×§×•×“×ª ××™×¡×•×£", "label_en": "Pickup Location" },
        "driver_info": { "type": "text", "label_he": "×¤×¨×˜×™ × ×”×’", "label_en": "Driver Info" }
      }
    },
    "activity": {
      "icon": "ğŸ¯",
      "label_he": "×¤×¢×™×œ×•×ª",
      "label_en": "Activity",
      "color": "#10B981",
      "bg_class": "bg-green-100 border-green-300",
      "fields": {
        "name": { "type": "text", "label_he": "×©× ×”×¤×¢×™×œ×•×ª", "label_en": "Activity Name", "required": true },
        "description": { "type": "textarea", "label_he": "×ª×™××•×¨", "label_en": "Description" },
        "duration": { "type": "text", "label_he": "××©×š", "label_en": "Duration" },
        "time": { "type": "time", "label_he": "×©×¢×”", "label_en": "Time" },
        "meeting_point": { "type": "text", "label_he": "× ×§×•×“×ª ××¤×’×©", "label_en": "Meeting Point" },
        "includes": { "type": "text", "label_he": "×›×•×œ×œ", "label_en": "Includes" },
        "what_to_bring": { "type": "text", "label_he": "××” ×œ×”×‘×™×", "label_en": "What to Bring" },
        "difficulty": { "type": "select", "label_he": "×¨××ª ×§×•×©×™", "label_en": "Difficulty", "options": ["easy", "moderate", "hard"] },
        "guide_language": { "type": "text", "label_he": "×©×¤×ª ××“×¨×™×š", "label_en": "Guide Language" }
      }
    },
    "meal": {
      "icon": "ğŸ½ï¸",
      "label_he": "××¨×•×—×”",
      "label_en": "Meal",
      "color": "#F97316",
      "bg_class": "bg-orange-100 border-orange-300",
      "fields": {
        "restaurant": { "type": "text", "label_he": "××¡×¢×“×”", "label_en": "Restaurant", "required": true },
        "meal_type": { "type": "select", "label_he": "×¡×•×’ ××¨×•×—×”", "label_en": "Meal Type", "options": ["breakfast", "lunch", "dinner", "snack"], "required": true },
        "cuisine": { "type": "text", "label_he": "×¡×•×’ ××˜×‘×—", "label_en": "Cuisine" },
        "reservation_time": { "type": "time", "label_he": "×©×¢×ª ×”×–×× ×”", "label_en": "Reservation Time" },
        "address": { "type": "text", "label_he": "×›×ª×•×‘×ª", "label_en": "Address" },
        "dietary_notes": { "type": "text", "label_he": "×”×¢×¨×•×ª ×ª×–×•× ×”", "label_en": "Dietary Notes" },
        "dress_code": { "type": "text", "label_he": "×“×¨×¡ ×§×•×“", "label_en": "Dress Code" }
      }
    },
    "transition": {
      "icon": "ğŸ”„",
      "label_he": "××¢×‘×¨ ×‘×™×Ÿ ×™×¢×“×™×",
      "label_en": "Transition",
      "color": "#EC4899",
      "bg_class": "bg-pink-100 border-pink-300",
      "fields": {
        "from_destination": { "type": "text", "label_he": "××™×¢×“", "label_en": "From", "required": true },
        "to_destination": { "type": "text", "label_he": "×œ×™×¢×“", "label_en": "To", "required": true },
        "method": { "type": "select", "label_he": "×××¦×¢×™", "label_en": "Method", "options": ["flight", "train", "bus", "car", "boat", "ferry"], "required": true },
        "duration": { "type": "text", "label_he": "××©×š", "label_en": "Duration" },
        "departure_time": { "type": "time", "label_he": "×™×¦×™××”", "label_en": "Departure" },
        "arrival_time": { "type": "time", "label_he": "×”×’×¢×”", "label_en": "Arrival" },
        "carrier": { "type": "text", "label_he": "××¤×¢×™×œ", "label_en": "Carrier" },
        "booking_ref": { "type": "text", "label_he": "××¡×¤×¨ ×”×–×× ×”", "label_en": "Booking Ref" }
      }
    },
    "free_time": {
      "icon": "â°",
      "label_he": "×–××Ÿ ×—×•×¤×©×™",
      "label_en": "Free Time",
      "color": "#6B7280",
      "bg_class": "bg-gray-100 border-gray-300",
      "fields": {
        "suggestions": { "type": "textarea", "label_he": "×”××œ×¦×•×ª", "label_en": "Suggestions" },
        "duration": { "type": "text", "label_he": "××©×š", "label_en": "Duration" },
        "area": { "type": "text", "label_he": "××–×•×¨", "label_en": "Area" }
      }
    },
    "custom": {
      "icon": "â­",
      "label_he": "×¤×¨×™×˜ ××•×ª××",
      "label_en": "Custom Item",
      "color": "#6366F1",
      "bg_class": "bg-indigo-100 border-indigo-300",
      "fields": {
        "custom_title": { "type": "text", "label_he": "×›×•×ª×¨×ª", "label_en": "Title", "required": true },
        "custom_description": { "type": "textarea", "label_he": "×ª×™××•×¨", "label_en": "Description" },
        "custom_icon": { "type": "text", "label_he": "××™×™×§×•×Ÿ", "label_en": "Icon" }
      }
    }
  },

  "meal_plan_labels": {
    "RO": { "he": "×œ×œ× ××¨×•×—×•×ª", "en": "Room Only" },
    "BB": { "he": "××¨×•×—×ª ×‘×•×§×¨", "en": "Bed & Breakfast" },
    "HB": { "he": "×—×¦×™ ×¤× ×¡×™×•×Ÿ", "en": "Half Board" },
    "FB": { "he": "×¤× ×¡×™×•×Ÿ ××œ×", "en": "Full Board" },
    "AI": { "he": "×”×›×œ ×›×œ×•×œ", "en": "All Inclusive" }
  },

  "api_routes": {
    "auth": {
      "POST /api/auth/signup": { "body": ["email", "password", "full_name", "agency_name"], "description": "Register new agency + user" },
      "POST /api/auth/login": { "body": ["email", "password"], "description": "Login" },
      "POST /api/auth/logout": { "description": "Logout" },
      "POST /api/auth/forgot-password": { "body": ["email"] },
      "GET /api/auth/me": { "description": "Current user + agency info" }
    },
    "countries": {
      "GET /api/countries": { "query": ["search", "is_active"], "response": "Country[]" },
      "GET /api/countries/:id": { "response": "Country" },
      "POST /api/countries": { "body": "CountryInput", "roles": ["admin", "owner", "agent"] },
      "PUT /api/countries/:id": { "body": "CountryInput", "roles": ["admin", "owner", "agent"] },
      "DELETE /api/countries/:id": { "roles": ["admin", "owner"] }
    },
    "destinations": {
      "GET /api/destinations": { "query": ["country_id", "search", "is_active"], "response": "Destination[]" },
      "GET /api/destinations/:id": { "response": "Destination" },
      "POST /api/destinations": { "body": "DestinationInput" },
      "PUT /api/destinations/:id": { "body": "DestinationInput" },
      "DELETE /api/destinations/:id": { "roles": ["admin", "owner"] }
    },
    "clients": {
      "GET /api/clients": { "query": ["search", "page", "limit"], "response": "PaginatedResponse<Client>" },
      "GET /api/clients/:id": { "response": "Client with packages" },
      "POST /api/clients": { "body": "ClientInput" },
      "PUT /api/clients/:id": { "body": "ClientInput" },
      "DELETE /api/clients/:id": { "roles": ["admin", "owner"] }
    },
    "packages": {
      "GET /api/packages": { "query": ["status", "country_id", "client_id", "search", "page", "limit", "sort"], "response": "PaginatedResponse<Package>" },
      "GET /api/packages/:id": { "response": "Package with days, items, client, country" },
      "POST /api/packages": { "body": "PackageInput", "response": "Package" },
      "PUT /api/packages/:id": { "body": "PackageInput" },
      "DELETE /api/packages/:id": { "roles": ["admin", "owner"] },
      "POST /api/packages/:id/duplicate": { "response": "Package", "description": "Clone package with all days and items" },
      "POST /api/packages/:id/generate-link": { "response": "{ token, url }" },
      "POST /api/packages/:id/save-full": { "body": "{ package, days, items }", "description": "Atomic save of entire package structure" }
    },
    "package_days": {
      "POST /api/packages/:id/days": { "body": "DayInput" },
      "PUT /api/packages/:id/days/:dayId": { "body": "DayInput" },
      "DELETE /api/packages/:id/days/:dayId": {},
      "PUT /api/packages/:id/days/reorder": { "body": "{ day_ids: string[] }" }
    },
    "package_items": {
      "POST /api/packages/:id/days/:dayId/items": { "body": "ItemInput" },
      "PUT /api/packages/:id/items/:itemId": { "body": "ItemInput" },
      "DELETE /api/packages/:id/items/:itemId": {},
      "PUT /api/packages/:id/items/move": { "body": "{ item_id, target_day_id, sort_order }" },
      "PUT /api/packages/:id/days/:dayId/items/reorder": { "body": "{ item_ids: string[] }" }
    },
    "output": {
      "GET /api/packages/:id/pdf": { "response": "PDF file", "description": "Generate and download PDF" },
      "POST /api/packages/:id/send-email": { "body": ["to_email", "subject", "message", "attach_pdf"] },
      "GET /api/packages/:id/whatsapp-link": { "query": ["phone"], "response": "{ url }" }
    },
    "public": {
      "GET /api/public/package/:token": { "description": "Public package view - no auth required", "response": "Package with agency branding" }
    },
    "templates": {
      "GET /api/templates": { "query": ["country_id", "search"] },
      "POST /api/templates": { "body": "TemplateInput" },
      "POST /api/templates/from-package/:packageId": { "description": "Create template from existing package" },
      "POST /api/templates/:id/apply": { "description": "Create new package from template" },
      "DELETE /api/templates/:id": {}
    },
    "settings": {
      "GET /api/settings": { "description": "Agency settings", "response": "Agency" },
      "PUT /api/settings": { "body": "AgencySettingsInput", "roles": ["admin", "owner"] },
      "POST /api/settings/upload-logo": { "body": "FormData (file)", "roles": ["admin", "owner"] }
    },
    "stats": {
      "GET /api/stats/dashboard": {
        "response": {
          "total_packages": "number",
          "packages_by_status": "{ draft, sent, confirmed, cancelled }",
          "total_clients": "number",
          "total_revenue": "number",
          "revenue_this_month": "number",
          "recent_packages": "Package[]",
          "popular_countries": "{ country, count }[]"
        }
      }
    }
  },

  "pages": {
    "public": {
      "/": { "component": "LandingPage", "description": "Marketing landing page" },
      "/login": { "component": "LoginPage" },
      "/signup": { "component": "SignupPage" },
      "/forgot-password": { "component": "ForgotPasswordPage" },
      "/p/:token": { "component": "PublicPackageView", "description": "Public package viewer (no auth)" }
    },
    "app": {
      "/app": { "component": "Dashboard", "description": "Main dashboard with stats" },
      "/app/packages": { "component": "PackagesList", "description": "All packages with filters" },
      "/app/packages/new": { "component": "PackageEditor", "description": "Create new package" },
      "/app/packages/:id": { "component": "PackageEditor", "description": "Edit existing package" },
      "/app/packages/:id/preview": { "component": "PackagePreview", "description": "Preview before sending" },
      "/app/countries": { "component": "CountriesPage", "description": "Manage countries" },
      "/app/countries/:id": { "component": "CountryDetail", "description": "Country with destinations" },
      "/app/destinations": { "component": "DestinationsPage" },
      "/app/clients": { "component": "ClientsPage" },
      "/app/clients/:id": { "component": "ClientDetail", "description": "Client with package history" },
      "/app/templates": { "component": "TemplatesPage" },
      "/app/settings": { "component": "SettingsPage", "description": "Agency settings & branding" },
      "/app/settings/team": { "component": "TeamSettings", "description": "Manage users & roles" }
    }
  },

  "components": {
    "layout": {
      "AppLayout": { "description": "Main app shell with sidebar and header", "children": ["Sidebar", "Header", "PageContent"] },
      "Sidebar": { "description": "Right sidebar (RTL) with navigation", "props": ["activeTab", "collapsed"] },
      "Header": { "description": "Top bar with breadcrumbs, search, language switch, notifications" }
    },
    "packages": {
      "PackageEditor": { "description": "Main package editing experience", "children": ["EditorHeader", "ItemTypesPalette", "DaysTimeline", "PriceSummary"] },
      "EditorHeader": { "description": "Package title, client info, status, action buttons" },
      "DaysTimeline": { "description": "Horizontal scrollable timeline of days", "children": ["DayCard"] },
      "DayCard": { "description": "Single day with droppable zone", "children": ["ItemCard"], "features": ["drag_target"] },
      "ItemCard": { "description": "Single item within a day", "features": ["draggable", "editable", "deletable"] },
      "ItemForm": { "description": "Dynamic form based on item type", "features": ["validates_by_type"] },
      "ItemTypesPalette": { "description": "Side panel with draggable item types" },
      "PriceSummary": { "description": "Breakdown by type + grand total" },
      "PackageActions": { "description": "Send email, WhatsApp, PDF, copy link" }
    },
    "common": {
      "Button": { "variants": ["primary", "secondary", "danger", "ghost"] },
      "Input": { "variants": ["text", "number", "email", "tel", "url", "textarea"] },
      "Select": {},
      "Modal": {},
      "Card": {},
      "Badge": { "variants": ["draft", "sent", "confirmed", "cancelled"] },
      "LoadingSpinner": {},
      "EmptyState": {},
      "ConfirmDialog": {},
      "DatePicker": {},
      "ImageUploader": {},
      "SearchInput": {},
      "Pagination": {},
      "Toast": {}
    }
  },

  "i18n": {
    "he": {
      "app_name": "TravelPro",
      "dashboard": "×œ×•×— ×‘×§×¨×”",
      "packages": "×—×‘×™×œ×•×ª",
      "countries": "××“×™× ×•×ª",
      "destinations": "×™×¢×“×™×",
      "clients": "×œ×§×•×—×•×ª",
      "templates": "×ª×‘× ×™×•×ª",
      "settings": "×”×’×“×¨×•×ª",
      "team": "×¦×•×•×ª",
      "new_package": "×—×‘×™×œ×” ×—×“×©×”",
      "edit_package": "×¢×¨×™×›×ª ×—×‘×™×œ×”",
      "package_title": "×©× ×”×—×‘×™×œ×”",
      "select_country": "×‘×—×¨ ××“×™× ×”",
      "select_destination": "×‘×—×¨ ×™×¢×“",
      "start_date": "×ª××¨×™×š ×”×ª×—×œ×”",
      "end_date": "×ª××¨×™×š ×¡×™×•×",
      "day": "×™×•×",
      "days": "×™××™×",
      "add_day": "×”×•×¡×£ ×™×•×",
      "add_item": "×”×•×¡×£ ×¤×¨×™×˜",
      "remove": "×”×¡×¨",
      "save": "×©××•×¨",
      "saving": "×©×•××¨...",
      "saved": "× ×©××¨ ×‘×”×¦×œ×—×”",
      "cancel": "×‘×™×˜×•×œ",
      "delete": "××—×§",
      "edit": "×¢×¨×•×š",
      "duplicate": "×©×›×¤×œ",
      "preview": "×ª×¦×•×’×” ××§×“×™××”",
      "download_pdf": "×”×•×¨×“ PDF",
      "send_email": "×©×œ×— ×‘××™×™×œ",
      "send_whatsapp": "×©×œ×— ×‘×•×•××˜×¡××¤",
      "copy_link": "×”×¢×ª×§ ×§×™×©×•×¨",
      "link_copied": "×”×§×™×©×•×¨ ×”×•×¢×ª×§!",
      "search": "×—×™×¤×•×©...",
      "filter": "×¡×™× ×•×Ÿ",
      "sort": "××™×•×Ÿ",
      "no_results": "×œ× × ××¦××• ×ª×•×¦××•×ª",
      "loading": "×˜×•×¢×Ÿ...",
      "error": "××™×¨×¢×” ×©×’×™××”",
      "try_again": "× ×¡×” ×©×•×‘",
      "confirm_delete": "×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?",
      "total": "×¡×”\"×›",
      "price": "××—×™×¨",
      "notes": "×”×¢×¨×•×ª",
      "internal_notes": "×”×¢×¨×•×ª ×¤× ×™××™×•×ª",
      "client_name": "×©× ×”×œ×§×•×—",
      "client_email": "××™××™×™×œ",
      "client_phone": "×˜×œ×¤×•×Ÿ",
      "adults": "××‘×•×’×¨×™×",
      "children": "×™×œ×“×™×",
      "infants": "×ª×™× ×•×§×•×ª",
      "status": {
        "draft": "×˜×™×•×˜×",
        "sent": "× ×©×œ×—",
        "confirmed": "××•×©×¨",
        "cancelled": "×‘×•×˜×œ"
      },
      "settings_labels": {
        "company_name": "×©× ×”×—×‘×¨×”",
        "company_email": "××™××™×™×œ",
        "company_phone": "×˜×œ×¤×•×Ÿ",
        "company_whatsapp": "WhatsApp",
        "company_address": "×›×ª×•×‘×ª",
        "company_website": "××ª×¨",
        "primary_color": "×¦×‘×¢ ×¨××©×™",
        "secondary_color": "×¦×‘×¢ ××©× ×™",
        "logo": "×œ×•×’×•",
        "terms": "×ª× ××™× ×•×”×’×‘×œ×•×ª",
        "email_signature": "×—×ª×™××ª ××™××™×™×œ",
        "pdf_footer": "×›×™×ª×•×‘ ×ª×—×ª×•×Ÿ PDF"
      }
    },
    "en": {
      "app_name": "TravelPro",
      "dashboard": "Dashboard",
      "packages": "Packages",
      "countries": "Countries",
      "destinations": "Destinations",
      "clients": "Clients",
      "templates": "Templates",
      "settings": "Settings",
      "team": "Team",
      "new_package": "New Package",
      "edit_package": "Edit Package",
      "save": "Save",
      "cancel": "Cancel",
      "delete": "Delete",
      "edit": "Edit",
      "duplicate": "Duplicate",
      "preview": "Preview",
      "download_pdf": "Download PDF",
      "send_email": "Send Email",
      "send_whatsapp": "Send WhatsApp",
      "copy_link": "Copy Link",
      "search": "Search...",
      "day": "Day",
      "days": "Days",
      "add_day": "Add Day",
      "add_item": "Add Item",
      "total": "Total",
      "price": "Price",
      "notes": "Notes",
      "status": {
        "draft": "Draft",
        "sent": "Sent",
        "confirmed": "Confirmed",
        "cancelled": "Cancelled"
      }
    }
  },

  "sample_data": {
    "agency": {
      "name": "×¡×•×›× ×•×ª × ×¡×™×¢×•×ª ×”×“×’××”",
      "slug": "demo-agency",
      "primary_color": "#2563eb",
      "contact_email": "info@demo-agency.com",
      "contact_phone": "03-1234567",
      "default_currency": "USD"
    },
    "countries": [
      {
        "name": "×ª××™×œ× ×“",
        "name_en": "Thailand",
        "code": "TH",
        "currency": "THB",
        "currency_symbol": "à¸¿",
        "language": "×ª××™×œ× ×“×™×ª, ×× ×’×œ×™×ª",
        "timezone": "UTC+7",
        "visa_info": "30 ×™××™× ×œ×œ× ×•×™×–×” ×œ×™×©×¨××œ×™×",
        "best_season": "× ×•×‘××‘×¨ - ××¨×¥",
        "destinations": [
          {
            "name": "×‘× ×’×§×•×§",
            "name_en": "Bangkok",
            "region": "××¨×›×–",
            "airport_code": "BKK",
            "latitude": 13.7563,
            "longitude": 100.5018,
            "highlights": ["××¨××•×Ÿ ×”××œ×š", "×•×•××˜ ×¤×•", "×•×•××˜ ××¨×•×Ÿ", "×©×•×§ ×¦'×˜×•×¦'×§", "×§××• ×¡××Ÿ ×¨×•××“"]
          },
          {
            "name": "×¤×•×§×˜",
            "name_en": "Phuket",
            "region": "×“×¨×•×",
            "airport_code": "HKT",
            "latitude": 7.8804,
            "longitude": 98.3923,
            "highlights": ["×—×•×£ ×¤×˜×•× ×’", "××™×™ ×¤×™ ×¤×™", "×‘×•×“×”×” ×”×’×“×•×œ", "××¤×¨×¥ ×¤×× ×’ × ×’×”"]
          },
          {
            "name": "×¦'×™×× ×’ ×××™",
            "name_en": "Chiang Mai",
            "region": "×¦×¤×•×Ÿ",
            "airport_code": "CNX",
            "latitude": 18.7883,
            "longitude": 98.9853,
            "highlights": ["×“×•×™ ×¡×•×˜×¤", "×”×¢×™×¨ ×”×¢×ª×™×§×”", "×©××•×¨×ª ×¤×™×œ×™×", "×©×•×§ ×œ×™×œ×”"]
          },
          {
            "name": "×§×¨××‘×™",
            "name_en": "Krabi",
            "region": "×“×¨×•×",
            "airport_code": "KBV",
            "latitude": 8.0863,
            "longitude": 98.9063,
            "highlights": ["×¨×™×™×œ×™ ×‘×™×¥'", "××§×“×© ××¢×¨×ª ×”× ××¨", "4 ××™×™×"]
          }
        ]
      }
    ],
    "package": {
      "title": "×—×‘×™×œ×ª ×ª××™×œ× ×“ ××•×©×œ××ª - 10 ×™××™×",
      "status": "draft",
      "start_date": "2026-03-15",
      "end_date": "2026-03-25",
      "currency": "USD",
      "adults": 2,
      "children": 1,
      "client_name": "××©×¤×—×ª ×›×”×Ÿ",
      "client_email": "cohen@gmail.com",
      "client_phone": "050-1234567",
      "days": [
        {
          "day_number": 1,
          "date": "2026-03-15",
          "title": "×”×’×¢×” ×œ×‘× ×’×§×•×§",
          "destination": "×‘× ×’×§×•×§",
          "items": [
            { "type": "flight", "title": "×˜×™×¡×” TLV â†’ BKK", "subtitle": "Thai Airways TG955", "time_start": "01:30", "time_end": "15:45", "price": 850, "data": { "airline": "Thai Airways", "flight_number": "TG955", "from": "TLV", "to": "BKK" } },
            { "type": "transfer", "title": "×”×¢×‘×¨×” ×œ×©××œ×•×Ÿ", "subtitle": "×¨×›×‘ ×¤×¨×˜×™ + × ×”×’", "duration": "45 ×“×§×•×ª", "price": 35, "data": { "vehicle_type": "private_car", "from": "× ××œ ×ª×¢×•×¤×” BKK", "to": "Marriott Sukhumvit" } },
            { "type": "accommodation", "title": "Bangkok Marriott Hotel", "subtitle": "Deluxe Room, BB, 3 ×œ×™×œ×•×ª", "price": 450, "data": { "hotel_name": "Bangkok Marriott Hotel Sukhumvit", "room_type": "Deluxe Room", "nights": 3, "meals": "BB", "stars": 5 } }
          ]
        },
        {
          "day_number": 2,
          "date": "2026-03-16",
          "title": "×¡×™×•×¨ ××¨××•× ×•×ª ×•××§×“×©×™×",
          "destination": "×‘× ×’×§×•×§",
          "items": [
            { "type": "activity", "title": "×¡×™×•×¨ ××¨××•×Ÿ ×”××œ×š + ××§×“×©×™×", "subtitle": "××¨××•×Ÿ ×”××œ×š, ×•×•××˜ ×¤×•, ×•×•××˜ ××¨×•×Ÿ", "time_start": "08:00", "time_end": "14:00", "price": 85, "data": { "name": "×¡×™×•×¨ ××¨××•× ×•×ª ×•××§×“×©×™×", "duration": "6 ×©×¢×•×ª", "guide_language": "×¢×‘×¨×™×ª" } },
            { "type": "meal", "title": "Blue Elephant", "subtitle": "××¨×•×—×ª ×¦×”×¨×™×™× ×ª××™×œ× ×“×™×ª", "time_start": "14:30", "price": 45, "data": { "restaurant": "Blue Elephant", "meal_type": "lunch", "cuisine": "Thai Royal" } },
            { "type": "free_time", "title": "×–××Ÿ ×—×•×¤×©×™", "subtitle": "×”××œ×¦×”: ×©×•×§ ×¦'×˜×•×¦'×§ / MBK", "time_start": "16:00", "price": 0, "data": { "suggestions": "×©×•×§ ×¦'×˜×•×¦'×§, ×§× ×™×•×Ÿ MBK, ×§××• ×¡××Ÿ ×¨×•××“" } }
          ]
        },
        {
          "day_number": 3,
          "date": "2026-03-17",
          "title": "×©×•×•×§×™× ×¦×¤×™×",
          "destination": "×‘× ×’×§×•×§",
          "items": [
            { "type": "activity", "title": "×©×•×§ ×¦×£ ×“×× ×•××Ÿ ×¡×“×•××§", "subtitle": "×›×•×œ×œ ×©×™×™×˜ ×‘×¡×™×¨×”", "time_start": "06:00", "time_end": "12:00", "price": 65, "data": { "name": "×©×•×§ ×¦×£ ×“×× ×•××Ÿ ×¡×“×•××§", "duration": "6 ×©×¢×•×ª" } },
            { "type": "activity", "title": "×©×•×§ ×¨×›×‘×ª ××›×˜×•× ×’", "subtitle": "×—×•×•×™×” ×™×™×—×•×“×™×ª!", "time_start": "13:00", "time_end": "15:00", "price": 30, "data": { "name": "×©×•×§ ×¨×›×‘×ª ××›×˜×•× ×’" } }
          ]
        },
        {
          "day_number": 4,
          "date": "2026-03-18",
          "title": "××¢×‘×¨ ×œ×¤×•×§×˜",
          "destination": "×¤×•×§×˜",
          "items": [
            { "type": "transition", "title": "×‘× ×’×§×•×§ â†’ ×¤×•×§×˜", "subtitle": "×˜×™×¡×” ×¤× ×™××™×ª Bangkok Air", "time_start": "10:00", "time_end": "11:30", "price": 95, "data": { "from_destination": "×‘× ×’×§×•×§", "to_destination": "×¤×•×§×˜", "method": "flight", "carrier": "Bangkok Air" } },
            { "type": "transfer", "title": "×”×¢×‘×¨×” ×œ×¨×–×•×¨×˜", "subtitle": "××™× ×™×‘×•×¡", "duration": "30 ×“×§×•×ª", "price": 25, "data": { "vehicle_type": "minibus", "from": "× ××œ ×ª×¢×•×¤×” HKT", "to": "Amari Phuket" } },
            { "type": "accommodation", "title": "Amari Phuket", "subtitle": "Pool Villa, HB, 5 ×œ×™×œ×•×ª", "price": 1200, "data": { "hotel_name": "Amari Phuket", "room_type": "Pool Villa", "nights": 5, "meals": "HB", "stars": 5 } }
          ]
        },
        {
          "day_number": 5,
          "date": "2026-03-19",
          "title": "×™×•× ×—×•×£ ×•×¤×™×œ×™×",
          "destination": "×¤×•×§×˜",
          "items": [
            { "type": "free_time", "title": "×‘×•×§×¨ ×—×•×¤×©×™", "subtitle": "×‘×¨×™×›×” / ×—×•×£ ×”××œ×•×Ÿ", "time_start": "08:00", "time_end": "12:00", "price": 0 },
            { "type": "activity", "title": "×©××•×¨×ª ×¤×™×œ×™× ××ª×™×ª", "subtitle": "××¤×’×© ×¢× ×¤×™×œ×™×, ×”××›×œ×”, ×¨×—×¦×”", "time_start": "13:00", "time_end": "17:00", "price": 95, "data": { "name": "Elephant Sanctuary", "duration": "4 ×©×¢×•×ª" } }
          ]
        },
        {
          "day_number": 6,
          "date": "2026-03-20",
          "title": "××™×™ ×¤×™ ×¤×™",
          "destination": "×¤×•×§×˜",
          "items": [
            { "type": "activity", "title": "×©×™×™×˜ ×œ××™×™ ×¤×™ ×¤×™", "subtitle": "×¡× ×•×¨×§×œ×™× ×’, ×××™×” ×‘×™×™, ××¨×•×—×ª ×¦×”×¨×™×™×", "time_start": "07:30", "time_end": "17:00", "price": 130, "data": { "name": "Phi Phi Islands Speedboat Tour", "includes": "×¡× ×•×¨×§×œ×™× ×’, ××¨×•×—×ª ×¦×”×¨×™×™×, ××©×§××•×ª" } }
          ]
        }
      ]
    }
  },

  "pdf_template": {
    "format": "A4",
    "direction": "rtl",
    "font": "Heebo",
    "sections": [
      { "type": "header", "content": ["agency_logo", "agency_name", "agency_contact"] },
      { "type": "title", "content": ["package_title", "client_name", "dates", "travelers_count"] },
      { "type": "summary", "content": ["country", "destinations", "days_count", "total_price"] },
      { "type": "days_loop", "content": ["day_header", "day_items"] },
      { "type": "price_table", "content": ["breakdown_by_type", "subtotal", "total"] },
      { "type": "terms", "content": ["terms_text"] },
      { "type": "footer", "content": ["agency_name", "phone", "email", "website"] }
    ]
  },

  "email_template": {
    "type": "responsive_html",
    "sections": [
      { "type": "header", "content": ["logo", "agency_name"] },
      { "type": "greeting", "content": "×©×œ×•× {client_name}," },
      { "type": "intro", "content": "×”× ×” ×”×¦×¢×ª ×”××—×™×¨ ×©×”×›× ×ª×™ ×¢×‘×•×¨×š:" },
      { "type": "package_summary", "content": ["title", "dates", "destinations", "price"] },
      { "type": "cta_buttons", "content": ["view_online", "download_pdf"] },
      { "type": "agent_info", "content": ["name", "phone", "email"] },
      { "type": "footer", "content": ["agency_name", "address", "unsubscribe"] }
    ],
    "attachments": ["pdf"]
  },

  "whatsapp_template": {
    "format": "ğŸŒ´ *{package_title}*\n\nğŸ“… {start_date} - {end_date}\nğŸ‘¥ {adults} ××‘×•×’×¨×™×{children_text}\nğŸ’° ×¡×”\"×›: {currency}{total_price}\n\nğŸ“ ×™×¢×“×™×: {destinations}\n\nğŸ”— ×œ×¦×¤×™×™×” ×‘×ª×•×›× ×™×ª ×”××œ××”:\n{public_url}\n\n×œ×©××œ×•×ª × ×•×¡×¤×•×ª:\nğŸ“ {agent_phone}\nâœ‰ï¸ {agent_email}"
  },

  "user_roles": {
    "owner": {
      "label_he": "×‘×¢×œ×™×",
      "label_en": "Owner",
      "permissions": ["all"]
    },
    "admin": {
      "label_he": "×× ×”×œ",
      "label_en": "Admin",
      "permissions": ["manage_packages", "manage_clients", "manage_destinations", "manage_team", "manage_settings", "view_analytics"]
    },
    "agent": {
      "label_he": "×¡×•×›×Ÿ",
      "label_en": "Agent",
      "permissions": ["manage_packages", "manage_clients", "view_destinations", "manage_templates"]
    },
    "viewer": {
      "label_he": "×¦×•×¤×”",
      "label_en": "Viewer",
      "permissions": ["view_packages", "view_clients", "view_destinations"]
    }
  },

  "subscription_plans": {
    "basic": {
      "label_he": "×‘×¡×™×¡×™",
      "label_en": "Basic",
      "price_monthly": 29,
      "price_yearly": 290,
      "limits": { "users": 1, "packages_per_month": 20, "countries": 5 },
      "features": ["package_editor", "pdf_generation", "email_sending", "whatsapp", "public_links"]
    },
    "pro": {
      "label_he": "××§×¦×•×¢×™",
      "label_en": "Pro",
      "price_monthly": 79,
      "price_yearly": 790,
      "limits": { "users": 5, "packages_per_month": -1, "countries": -1 },
      "features": ["all_basic", "whitelabel", "custom_pdf", "templates", "client_management", "analytics"]
    },
    "enterprise": {
      "label_he": "×¢×¡×§×™",
      "label_en": "Enterprise",
      "price_monthly": 199,
      "price_yearly": 1990,
      "limits": { "users": -1, "packages_per_month": -1, "countries": -1 },
      "features": ["all_pro", "api_access", "custom_domain", "priority_support", "multi_branch", "sso"]
    }
  },

  "design": {
    "colors": {
      "primary": "#2563eb",
      "primary_light": "#dbeafe",
      "secondary": "#059669",
      "secondary_light": "#d1fae5",
      "accent": "#7c3aed",
      "warning": "#f59e0b",
      "danger": "#ef4444",
      "dark": "#1e293b",
      "light": "#f8fafc"
    },
    "sidebar": {
      "width": "224px",
      "collapsed_width": "56px",
      "bg": "#1e293b",
      "active_bg": "#2563eb"
    },
    "border_radius": {
      "sm": "0.375rem",
      "md": "0.5rem",
      "lg": "0.75rem",
      "xl": "1rem"
    }
  },

  "completion_checklist": [
    "Supabase project created with all tables",
    "RLS policies active on all tables",
    "Auth flow working (signup, login, logout)",
    "Multi-tenant isolation verified",
    "Dashboard with real stats",
    "Package list with filters and search",
    "Package editor with drag & drop",
    "All 8 item type forms working",
    "Auto-save on package editor",
    "Price auto-calculation",
    "PDF generation with Hebrew",
    "Email sending with PDF attachment",
    "WhatsApp link generation",
    "Public package viewer",
    "Client management CRUD",
    "Country & destination management",
    "Template system",
    "Settings & branding page",
    "Hebrew/English language switch",
    "RTL layout correct",
    "Mobile responsive",
    "Sample Thailand data seeded",
    "Error handling on all forms",
    "Loading states on all pages",
    "Empty states on all lists"
  ]
}
